---
title: ec2 슈퍼심플 도커 배포법
date: 2021-01-23 23:18:35
tags:
---

여러명이서 함께하던 내 프로젝트 서버가 죽었다.
이제 모두들 이 프로젝트에 대한 애정도 딱히 없고, 굳이 이 서비스를 유지할 이유도 없어 죽도록 놔둔 것이지만, 난 내 개인적으로 첫번째 프로젝트였던지라 감회가 달랐다. 그리고 기획부터 개발까지 으쌰으쌰 달려왔기에, 더욱 더 의미가 깊었다.

따라서, 혼자, 서버를, 살려보기로 했다!

1. 해야할 일

- 프론트 서버도 죽고
- 서버도 죽고
- 도메인도 계약기간이 만료됐다.

따라서 이 세가지를 모두 renew해야한다.

2. 도메인부터 등록하자.
   원래는 가비아에서 도메인을 등록했었는데, 그냥 편의상 aws로 도메인을 구입하기로 했다.

도메인이름도 바꿨다.

11$가 나오면 대충 14$가 나온다.

3. ec2를 등록한다.
   구글에 아주 좋은 자료를 찾아서, 하라는 대로 했을 뿐인데,, 어떻게 되었다.
   docker aws ec2설치 라는 키워드만 치면 만사 해결되는 매직 !
   ec2에서 인스턴스 등록하구, 키페어 등록해 다운받고 (잊으면 안됨)
   이 키페어를 통해서 ssh install 진행 ( 키페어와, 인스턴스 주소 연결할 것 )

4. 도커 빌드 도커 런

- docker build -t (tag) 이름 .
- docker run -d(deploy) -p(port) 80(external):3000(internal) 이름

5. 앗 ! db가 죽었네.
   db가 없어 deploy, docker run 할 수 없었다.
   이 상황에서는 뭐 딱히 할 수 있는 게 없었다. 다시 크롤링을 해야하나..? 기존의 자료는 어떡하지..?
   원래 db를 담당했던 사람에게 물어볼수밖에..
   자료를 따로 받기로 했다.
